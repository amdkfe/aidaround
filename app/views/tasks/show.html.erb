<!-- INDIVIDUAL task -->
<!-- called from :controller => task, :action => show -->
<%= tag.div nil, id: 'taskmap'%>

<div>
  <%= image_tag @creator.avatar, width: '20%' %>
</div>

<div class = "taskShow">
  <div> <%= time_ago_in_words(@task.created_at).gsub('about','') +" ago" %> </div>
  <div> <%= @task.status %> </div>
  <div> <%= @task.title.capitalize %> </div>
  <div> <%= @creator.address || @creator.postcode%> </div>
  <div> <%= @task.desc.capitalize %> </div>
  <div> Valid until: <%= @task.duration %> </div>
  <div> Points: <%= @task.points %> </div>
  <div> Created by: <%= link_to  "#{@creator.username.capitalize}", user_path(@creator) %></div>

  <% if !@assignee = "" %>
    <div> Assigned to: <%= link_to  "#{@assignee.username.capitalize}", user_path(@assignee) %> </div>
  <% else %>
    <div> <%= link_to 'Accept it!', task_path(@task.id) %></div>
  <%end %>

  <div> <%= link_to 'Back to the creator\'s page', created_tasks_user_path(@creator) %></div>
</div>

<script>
  var map = new GMaps({
    div: '#taskmap',
    lat: <%= @creator.latitude %>,
    lng: <%= @creator.longitude %>,
  });
  map.addMarker({
    lat: <%= @creator.latitude %>,
    lng: <%= @creator.longitude %>,
    title: '<%= @creator.postcode %>',
})
</script>
